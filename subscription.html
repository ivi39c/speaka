<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¨‚é–± Speaka | å°ˆæ¥­å¤šèªç³»ç¿»è­¯æ©Ÿå™¨äºº</title>
  <!-- è¨‚é–±é é¢å°ˆç”¨æ¨£å¼ -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/subscription.css">
</head>
<body>
  <!-- å°èˆªåˆ— -->
  <nav class="navbar">
    <div class="container">
      <div class="nav-content">
        <a href="index.html" class="logo">Speaka</a>
        <a href="index.html" class="back-btn">
          <span>â†</span>
          <span>è¿”å›é¦–é </span>
        </a>
      </div>
    </div>
  </nav>

  <!-- ä¸»è¦å…§å®¹ -->
  <main style="padding: 120px 0 60px;">
    <div class="subscription-container">
      <!-- é é¢æ¨™é¡Œ -->
      <div class="subscription-header">
        <h1>è¨‚é–± Speaka</h1>
        <p>é–‹å§‹æ‚¨çš„å¤šèªç³»ç¿»è­¯ä¹‹æ—…</p>
      </div>

      <!-- è¨‚é–±è¡¨å–®å¡ç‰‡ -->
      <div class="subscription-card">
        <form id="subscriptionForm">
          <!-- ç¾¤çµ„æ•¸é‡é¸æ“‡ -->
          <div class="groups-section">
            <h3 class="section-title">é¸æ“‡ç¾¤çµ„æ•¸é‡</h3>
            <div class="groups-input-container">
              <label class="groups-label" for="groupCount">éœ€è¦ç¿»è­¯çš„ç¾¤çµ„æ•¸é‡ï¼š</label>
              <input 
                type="number"
                id="groupCount"
                class="groups-input"
                min="1"
                max="999"
                step="1"
                inputmode="numeric"
                pattern="[0-9]*"
                value="1"
                placeholder="è¼¸å…¥ç¾¤çµ„æ•¸é‡"
              >
              <span class="groups-label">å€‹ç¾¤çµ„</span>
            </div>
          </div>

          <!-- è¨ˆè²»é€±æœŸé¸æ“‡ -->
          <div class="billing-section">
            <h3 class="section-title">é¸æ“‡è¨ˆè²»é€±æœŸ</h3>
            <div class="billing-options">
              <div class="billing-option">
                <input type="radio" id="monthly" name="billingPeriod" value="monthly" class="billing-radio" checked>
                <label for="monthly" class="billing-label">
                  <div class="billing-period">æœˆç¹³</div>
                  <div class="billing-price">NT$ 199</div>
                </label>
              </div>
              <div class="billing-option">
                <input type="radio" id="halfyearly" name="billingPeriod" value="halfyearly" class="billing-radio">
                <div class="billing-discount">çœ 5%</div>
                <label for="halfyearly" class="billing-label">
                  <div class="billing-period">åŠå¹´ç¹³</div>
                  <div class="billing-price">NT$ 1,199</div>
                </label>
              </div>
              <div class="billing-option">
                <input type="radio" id="yearly" name="billingPeriod" value="yearly" class="billing-radio">
                <div class="billing-discount">çœ 15%</div>
                <label for="yearly" class="billing-label">
                  <div class="billing-period">å¹´ç¹³</div>
                  <div class="billing-price">NT$ 2,030</div>
                </label>
              </div>
            </div>
          </div>

          <!-- åƒ¹æ ¼é¡¯ç¤º -->
          <div class="price-display">
            <div class="price-breakdown">
              <div class="price-line">
                <span>å–®åƒ¹ï¼š</span>
                <span class="price-amount" id="unitPrice">NT$ 199 / ç¾¤çµ„ / æœˆ</span>
              </div>
              <div class="price-line">
                <span>ç¾¤çµ„æ•¸é‡ï¼š</span>
                <span id="groupQuantity">1 å€‹</span>
              </div>
              <div class="price-line">
                <span>å°è¨ˆï¼š</span>
                <span class="price-amount" id="subtotal">NT$ 199</span>
              </div>
              <!-- ç¨…é‡‘åˆ—ï¼šç›®å‰åœç”¨ï¼ˆéš±è—ï¼‰ï¼Œæœªè¨ˆå…¥ç¸½è¨ˆ -->
              <div class="price-line" id="summaryTaxRow" style="display:none;">
                <span>ç¨…é‡‘ 5%</span>
                <span class="price-amount" id="summaryTax">NT$ 0</span>
              </div>
              <div class="price-line total">
                <span>ç¸½è¨ˆï¼š</span>
                <span class="price-amount" id="totalPrice">NT$ 199</span>
              </div>
            </div>
          </div>

          <!-- æ”¯ä»˜æ–¹å¼é¸æ“‡ -->
          <div class="payment-section">
            <h3 class="section-title">é¸æ“‡æ”¯ä»˜æ–¹å¼</h3>
            <div class="payment-methods">
              <div class="payment-option selected">
                <input type="radio" name="paymentMethod" value="linepay" class="payment-radio" checked>
                <span class="payment-icon">ğŸ’³</span>
                <div class="payment-info">
                  <div class="payment-name">LINE Pay</div>
                  <div class="payment-desc">å¿«é€Ÿå®‰å…¨çš„è¡Œå‹•æ”¯ä»˜</div>
                </div>
              </div>
              <div class="payment-option">
                <input type="radio" name="paymentMethod" value="credit" class="payment-radio">
                <span class="payment-icon">ğŸ’³</span>
                <div class="payment-info">
                  <div class="payment-name">ä¿¡ç”¨å¡</div>
                  <div class="payment-desc">Visaã€MasterCardã€JCB</div>
                </div>
              </div>
              <div class="payment-option">
                <input type="radio" name="paymentMethod" value="transfer" class="payment-radio">
                <span class="payment-icon">ğŸ¦</span>
                <div class="payment-info">
                  <div class="payment-name">éŠ€è¡Œè½‰å¸³</div>
                  <div class="payment-desc">ATM æˆ–ç¶²è·¯éŠ€è¡Œè½‰å¸³</div>
                </div>
              </div>
            </div>
          </div>

          <!-- å¸³å–®è³‡è¨Š -->
          <div class="billing-info-section">
            <h3 class="section-title">å¸³å–®è³‡è¨Š</h3>
            <div class="form-grid">
              <!-- å§“å -->
              <div class="form-group">
                <label for="contactName" class="form-label required">è¯çµ¡äººå§“å</label>
                <input type="text" id="contactName" name="contactName" class="form-input" required>
                <div class="input-hint">è«‹è¼¸å…¥çœŸå¯¦å§“åï¼Œ2-20å€‹å­—ç¬¦</div>
              </div>
              <!-- LINE ID -->
              <div class="form-group">
                <label for="lineId" class="form-label required">LINE ID</label>
                <input type="text" id="lineId" name="lineId" class="form-input" placeholder="è«‹è¼¸å…¥æ‚¨çš„ LINE ID" required>
                <div class="input-hint">è«‹å¡«å¯«æ‚¨çš„ LINE IDï¼Œä»¥å”åŠ©å¾ŒçºŒé–‹é€šæœå‹™</div>
              </div>
              <!-- é›»è©± -->
              <div class="form-group">
                <label for="phone" class="form-label required">è¯çµ¡é›»è©±</label>
                <input type="tel" id="phone" name="phone" class="form-input" required>
                <div class="input-hint">æ ¼å¼ï¼š09xxxxxxxx æˆ– 02-xxxxxxxx</div>
              </div>
              <!-- é›»å­éƒµä»¶ -->
              <div class="form-group">
                <label for="email" class="form-label required">é›»å­éƒµä»¶</label>
                <input type="email" id="email" name="email" class="form-input" required>
                <div class="input-hint">ç”¨æ–¼æ¥æ”¶è¨‚é–±ç¢ºèªå’Œé‡è¦é€šçŸ¥</div>
              </div>
              <!-- ç™¼ç¥¨é¡å‹ -->
              <div class="form-group">
                <label for="invoiceType" class="form-label required">ç™¼ç¥¨é¡å‹</label>
                <select id="invoiceType" name="invoiceType" class="form-select" required>
                  <option value="">è«‹é¸æ“‡ç™¼ç¥¨é¡å‹</option>
                  <option value="none">å…é–‹ç™¼ç¥¨</option>
                  <option value="personal">å€‹äººç™¼ç¥¨</option>
                  <option value="company">å…¬å¸ç™¼ç¥¨</option>
                  <option value="donation">æè´ˆç™¼ç¥¨</option>
                </select>
              </div>
              <!-- å€‹äººç™¼ç¥¨ï¼šå…±é€šè¼‰å…·è™Ÿç¢¼ -->
              <div class="form-group personal-field" style="display: none;">
                <label for="carrierNumber" class="form-label">å…±é€šè¼‰å…·è™Ÿç¢¼</label>
                <input type="text" id="carrierNumber" name="carrierNumber" class="form-input" placeholder="è«‹è¼¸å…¥å…±é€šè¼‰å…·è™Ÿç¢¼">
                <div class="input-hint">è‹¥ç„¡å…±é€šè¼‰å…·ï¼Œå¯ç•™ç©ºæˆ–å¡«å¯«å¯„é€åœ°å€</div>
              </div>
              <!-- å€‹äººç™¼ç¥¨ï¼šå¯„é€åœ°å€ -->
              <div class="form-group personal-field full-width" style="display: none;">
                <label for="address" class="form-label">å¯„é€åœ°å€</label>
                <input type="text" id="address" name="address" class="form-input" placeholder="ç™¼ç¥¨å¯„é€åœ°å€ï¼ˆé¸å¡«ï¼‰">
                <div class="input-hint">å¦‚éœ€ç´™æœ¬ç™¼ç¥¨å¯„é€è«‹å¡«å¯«</div>
              </div>
              <!-- å…¬å¸ç™¼ç¥¨ç›¸é—œæ¬„ä½ -->
              <div class="form-group company-field" style="display: none;">
                <label for="companyName" class="form-label">å…¬å¸åç¨±</label>
                <input type="text" id="companyName" name="companyName" class="form-input">
                <div class="input-hint">è«‹è¼¸å…¥å®Œæ•´çš„å…¬å¸åç¨±</div>
              </div>
              <div class="form-group company-field" style="display: none;">
                <label for="taxId" class="form-label">çµ±ä¸€ç·¨è™Ÿ</label>
                <input type="text" id="taxId" name="taxId" class="form-input" pattern="[0-9]{8}" maxlength="8">
                <div class="input-hint">8ä½æ•¸å­—ï¼Œç³»çµ±æœƒè‡ªå‹•é©—è­‰æ ¼å¼</div>
              </div>
              <div class="form-group company-field full-width" style="display: none;">
                <label for="companyAddress" class="form-label">å…¬å¸åœ°å€</label>
                <input type="text" id="companyAddress" name="companyAddress" class="form-input" placeholder="è«‹è¼¸å…¥å…¬å¸åœ°å€">
                <div class="input-hint">å…¬å¸ç™¼ç¥¨å¯„é€åœ°å€</div>
              </div>
            </div>
          </div>

          <!-- æœå‹™æ¢æ¬¾ -->
          <div class="terms-section">
            <div class="terms-checkbox">
              <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
              <label for="agreeTerms" class="terms-text">
                æˆ‘å·²é–±è®€ä¸¦åŒæ„ <a href="#" class="terms-link" data-type="terms">æœå‹™æ¢æ¬¾</a> å’Œ <a href="#" class="terms-link" data-type="privacy">éš±ç§æ”¿ç­–</a>
              </label>
            </div>
          </div>
                </form>
      </div>

      <!-- FAQ å€å¡Š -->
      <div class="faq-section">
        <h3>å¸¸è¦‹å•é¡Œ</h3>
        <div class="faq-item">
          <div class="faq-question">Q: å¦‚ä½•é–‹å§‹ä½¿ç”¨ Speakaï¼Ÿ</div>
          <div class="faq-answer">é¸æ“‡æ–¹æ¡ˆå®Œæˆä»˜æ¬¾å¾Œï¼Œè¯çµ¡å®˜æ–¹ LINE é€²è¡Œæœå‹™é–‹é€šï¼Œæˆ‘å€‘æœƒå”åŠ©æ‚¨å°‡æ©Ÿå™¨äººåŠ å…¥ç¾¤çµ„ã€‚</div>
        </div>
        <div class="faq-item">
          <div class="faq-question">Q: æ”¯æ´å“ªäº›ä»˜æ¬¾æ–¹å¼ï¼Ÿ</div>
          <div class="faq-answer">æ”¯æ´ LINE Payã€ä¿¡ç”¨å¡ã€éŠ€è¡Œè½‰å¸³ç­‰å¤šç¨®ä»˜æ¬¾æ–¹å¼ï¼Œä¼æ¥­å®¢æˆ¶å¯é–‹ç«‹ç™¼ç¥¨ã€‚</div>
        </div>
        <div class="faq-item">
          <div class="faq-question">Q: å¯ä»¥éš¨æ™‚å–æ¶ˆè¨‚é–±å—ï¼Ÿ</div>
          <div class="faq-answer">å¯ä»¥ï¼Œæœˆç¹³æ–¹æ¡ˆå¯éš¨æ™‚å–æ¶ˆï¼Œå…¶ä»–æ–¹æ¡ˆä¾ç…§åˆç´„æ¢æ¬¾åŸ·è¡Œï¼Œä¸æ»¿æ„å¯äº«æ¯”ä¾‹é€€è²»ã€‚</div>
        </div>
        <div class="faq-item">
          <div class="faq-question">Q: ç¿»è­¯å“è³ªå¦‚ä½•ä¿è­‰ï¼Ÿ</div>
          <div class="faq-answer">æ¡ç”¨ Google ç¿»è­¯æ ¸å¿ƒæŠ€è¡“ï¼Œä¸¦æŒçºŒå„ªåŒ–æ¼”ç®—æ³•ï¼Œç¢ºä¿ç¿»è­¯æº–ç¢ºåº¦èˆ‡æµæš¢åº¦ã€‚</div>
        </div>
      </div>

      <!-- åº•éƒ¨ CTA -->
      <div class="bottom-cta">
        <h3>é‚„æœ‰å…¶ä»–å•é¡Œï¼Ÿ</h3>
        <p>æˆ‘å€‘çš„å®¢æœåœ˜éšŠéš¨æ™‚ç‚ºæ‚¨æœå‹™</p>
        <div class="contact-buttons">
          <a href="mailto:talkeasenow@gmail.com" class="contact-btn">
            <span>ğŸ“§</span>
            <span>Email è«®è©¢</span>
          </a>
          <a href="https://line.me/ti/p/@537etdoz" class="contact-btn" target="_blank">
            <span>ğŸ’¬</span>
            <span>LINE å®¢æœ</span>
          </a>
        </div>
      </div>
    </div>

    
    <!-- åº•éƒ¨æµ®å‹•ç¸½è¨ˆæ¬„ä½ï¼ˆèˆ‡æ•´é«”é¢¨æ ¼ä¸€è‡´ï¼‰ -->
    <div class="floating-total" id="floatingTotal">
      <div class="floating-total-inner">
        <button class="floating-toggle" id="floatingToggleBtn" type="button" aria-expanded="false" aria-controls="floatingTotalDetails">
          <span class="floating-total-label"><strong>ç¸½è¨ˆï¼š</strong><span id="floatingTotalPrice">NT$ 199</span></span>
          <span class="floating-toggle-icon" id="floatingToggleIcon" aria-hidden="true">â–²</span>
        </button>
        <button class="floating-cta-btn" id="floatingCtaBtn" type="button">ç«‹å³è¨‚é–±</button>
      </div>
      <div class="floating-total-details" id="floatingTotalDetails" hidden>
        <div class="detail-line">
          <span>å–®åƒ¹ï¼š</span>
          <span id="floatingUnitPrice">NT$ 199 / ç¾¤çµ„ / æœˆ</span>
        </div>
        <div class="detail-line">
          <span>ç¾¤çµ„æ•¸é‡ï¼š</span>
          <span id="floatingGroupCount">1 å€‹ç¾¤çµ„</span>
        </div>
        <div class="detail-line">
          <span>å°è¨ˆï¼š</span>
          <span id="floatingSubtotal">NT$ 199</span>
        </div>
      </div>
    </div>

    <script>
      (function() {
        const toggleBtn = document.getElementById('floatingToggleBtn');
        const details   = document.getElementById('floatingTotalDetails');
        const icon      = document.getElementById('floatingToggleIcon');
        const ctaBtn    = document.getElementById('floatingCtaBtn');
        const form      = document.getElementById('subscriptionForm');

        function toggleDetails() {
          const isHidden = details.hasAttribute('hidden');
          if (isHidden) {
            details.removeAttribute('hidden');
            icon.textContent = 'â–¼';
            toggleBtn.setAttribute('aria-expanded', 'true');
          } else {
            details.setAttribute('hidden', '');
            icon.textContent = 'â–²';
            toggleBtn.setAttribute('aria-expanded', 'false');
          }
        }
        if (toggleBtn && details && icon) {
          toggleBtn.addEventListener('click', toggleDetails);
        }
        if (ctaBtn && form) {
          ctaBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            // è§¸ç™¼è¡¨å–®é€å‡ºæµç¨‹ï¼ˆæœƒè‡ªè¡Œé©—è­‰ä¸¦å°å‘ä¸‹ä¸€æ­¥ï¼‰
            if (typeof form.requestSubmit === 'function') {
              form.requestSubmit();
            } else {
              form.submit();
            }
          });
        }
        // éµç›¤å¯åŠæ€§ï¼šEnter/Space ä¹Ÿèƒ½åˆ‡æ›
        if (toggleBtn) {
          toggleBtn.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              toggleDetails();
            }
          });
        }
      })();

      // æ›´æ–°æµ®å‹•ç¸½è¨ˆå€å¡Šï¼ˆç”±æ ¸å¿ƒé‚è¼¯å‚³å…¥ periodï¼‰
      function updateFloatingSummary(unitPrice, groupCount, subtotal, period) {
        document.getElementById('floatingUnitPrice').textContent =
          `NT$ ${unitPrice.toLocaleString()} / ç¾¤çµ„ / ${period}`;
        document.getElementById('floatingGroupCount').textContent = `${groupCount} å€‹ç¾¤çµ„`;
        document.getElementById('floatingSubtotal').textContent = `NT$ ${subtotal.toLocaleString()}`;
        document.getElementById('floatingTotalPrice').textContent = `NT$ ${subtotal.toLocaleString()}`;
      }

      // ç­‰ Subscription æ¨¡çµ„ ready å¾Œå†æ›é‰¤
      (function () {
        function patch() {
          const mod = window.SubscriptionSpeaka?.SubscriptionPage;
          if (!mod || !mod.updatePriceDisplay) return;
          if (mod.__patchedFloating) return;
          const original = mod.updatePriceDisplay.bind(mod);
          mod.updatePriceDisplay = function (unitPrice, groupCount, total, period) {
            original(unitPrice, groupCount, total, period);
            updateFloatingSummary(unitPrice, groupCount, total, period);
          };
          mod.__patchedFloating = true;
          window.updateSubscriptionPrice?.();
        }
        window.addEventListener('subscriptionPageReady', patch);
        if (document.readyState !== 'loading') setTimeout(patch, 0);
      })();
    </script>

  </main>

  <!-- å¼•ç”¨ JS æ–‡ä»¶ï¼ˆæ”¾åœ¨å°¾ç«¯ï¼‰ -->
  <script src="js/subscription.js"></script>
</body>
</html>
